# Autoppia Worker Deployment Configuration
# This file defines how the worker should be deployed on Autoppia infrastructure

deployment:
  # Worker identification
  worker_id: autoppia-miner
  version: "0.1.0"
  
  # Resource requirements
  resources:
    cpu: "1"
    memory: "512Mi"
    storage: "1Gi"
    
  # Scaling configuration
  scaling:
    min_replicas: 1
    max_replicas: 10
    target_cpu_utilization: 70
    
  # Health check configuration
  health_check:
    enabled: true
    path: "/health"
    interval: 30
    timeout: 5
    failure_threshold: 3
    
  # Environment variables
  env:
    - name: LOG_LEVEL
      value: "INFO"
    - name: WORKER_NAME
      value: "autoppia-miner"
      
  # Secrets (referenced from Autoppia secrets management)
  secrets:
    - name: AUTOPPIA_API_KEY
      secret_name: autoppia-api-key
      
  # Network configuration
  network:
    port: 8080
    protocol: "http"
    
  # Privacy and security settings
  privacy:
    data_retention: false
    log_retention_days: 7
    encrypt_data: true
    
  # Monitoring
  monitoring:
    enabled: true
    metrics_endpoint: "/metrics"
    traces_enabled: true

